<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistemas de Horas Complementares - SHC</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body class="theme-admin">

   <header class="header">
        <a href="dashboard administrador.html" class="logout-btn"><i class="fas fa-chevron-circle-left"></i> Voltar</a>
        <div class="logo">SHC</div>
        <a href="index.html" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Sair</a>
    </header>

    <main class="main-container">
        <div class="profile-card">

            <div class="profile-avatar-wrapper">
                <i id="default-avatar-icon" class="fas fa-user-circle"></i>
                <img id="profile-avatar" src="" alt="Foto do Perfil">
                <div class="avatar-edit-overlay"><i class="fas fa-camera"></i></div>
                <input type="file" id="avatar-input" accept="image/*">
                
                <div id="avatar-menu" class="avatar-menu">
                    <button id="upload-btn"><i class="fas fa-upload"></i> Carregar Nova Foto</button>
                    <button id="remove-btn" class="hidden"><i class="fas fa-trash"></i> Remover Foto</button>
                </div>
            </div>

            <h2 class="profile-name">Administrador</h2>
            <p class="profile-email">admin@fmp.sc.gov.br</p>

            <div class="profile-details">
                <div class="detail-item"><span class="label">ID Funcional</span><span class="value">000001</span></div>
                <div class="detail-item"><span class="label">Cargo</span><span class="value">Administrador do Sistema</span></div>
                <div class="detail-item"><span class="label">Nível de Acesso</span><span class="value">Superusuário (Controle Total)</span></div>
            </div>

            <div class="summary-section">
                <h3>Status do Sistema</h3>
                <div class="summary-stats">
                    <div class="stat-card">
                        <div class="value">v1.0</div>
                        <div class="label">VERSÃO DO SISTEMA</div>
                    </div>
                    <div class="stat-card">
                        <div class="value"><span class="status-badge">OPERACIONAL</span></div>
                        <div class="label">STATUS DA API</div>
                    </div>
                    <div class="stat-card">
                        <div class="value">580</div>
                        <div class="label">TOTAL DE USUÁRIOS</div>
                    </div>
                </div>
            </div>

            <div class="profile-actions">
                <button id="change-password-btn" class="btn btn-secondary">
                    <i class="fas fa-key"></i> Alterar Senha
                </button>
            </div>

        </div>
    </main>

    <!-- Modal de alteração de senha -->
    <dialog id="password-modal" class="password-modal">
        <div class="modal-header">
            <h2 class="modal-title">Alterar Senha</h2>
            <button id="close-modal-btn" class="close-btn" title="Fechar">&times;</button>
        </div>
        <form>
            <div class="form-group">
                <label for="current-password">Senha Atual</label>
                <input type="password" id="current-password" required>
            </div>
            <div class="form-group">
                <label for="new-password">Nova Senha</label>
                <input type="password" id="new-password" required>
            </div>
            <div class="form-group">
                <label for="confirm-password">Confirmar Nova Senha</label>
                <input type="password" id="confirm-password" required>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancel-btn" class="btn btn-secondary">Cancelar</button>
                <button type="submit" class="btn btn-primary">Salvar Alterações</button>
            </div>
        </form>
    </dialog>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const avatarWrapper = document.querySelector('.profile-avatar-wrapper');
            const avatarInput = document.getElementById('avatar-input');
            const profileAvatarImg = document.getElementById('profile-avatar');
            const avatarMenu = document.getElementById('avatar-menu');
            const uploadBtn = document.getElementById('upload-btn');
            const removeBtn = document.getElementById('remove-btn');
            
            let userHasPhoto = false; 

            function setAvatarState(hasPhoto) {
                userHasPhoto = hasPhoto;
                if (hasPhoto) {
                    avatarWrapper.classList.add('has-photo');
                    removeBtn.classList.remove('hidden');
                } else {
                    avatarWrapper.classList.remove('has-photo');
                    profileAvatarImg.src = "";
                    removeBtn.classList.add('hidden');
                }
            }
            setAvatarState(userHasPhoto);

            avatarWrapper.addEventListener('click', (e) => {
                if (!e.target.closest('#avatar-menu')) {
                    avatarMenu.style.display = avatarMenu.style.display === 'block' ? 'none' : 'block';
                }
            });
            document.addEventListener('click', (e) => {
                if (!avatarWrapper.contains(e.target)) {
                    avatarMenu.style.display = 'none';
                }
            });

            uploadBtn.addEventListener('click', () => avatarInput.click());
            removeBtn.addEventListener('click', () => setAvatarState(false));

            avatarInput.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        profileAvatarImg.src = e.target.result;
                        setAvatarState(true);
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Lógica do Modal de Senha
            const passwordModal = document.getElementById('password-modal');
            const changePasswordBtn = document.getElementById('change-password-btn');
            const closeModalBtn = passwordModal.querySelector('.close-btn');
            const cancelBtn = passwordModal.querySelector('#cancel-btn');

            changePasswordBtn.addEventListener('click', () => passwordModal.showModal());
            closeModalBtn.addEventListener('click', () => passwordModal.close());
            cancelBtn.addEventListener('click', () => passwordModal.close());
            passwordModal.addEventListener('click', (e) => {
                if (e.target === passwordModal) passwordModal.close();
            });
        });
    </script>
</body>
</html>



